const loginModel = require('../models/loginModel')

class User {
    async index(req,res){
    
        res.render("indexUser")
    }
    async register (req,res){

        res.render('register')
    }
    async registerRec(req,res){
       
        try {
            var {email, password} = req.body
            
            var result = await loginModel.register(email, password)
            
            if(loginModel.errors.length > 0){
                
                req.flash('errors', loginModel.errors)
                req.session.save(()=>{
                    return res.redirect('back')
                })
                
                return
            }

            req.flash('success', 'Seu usuÃ¡rio foi cadastrado com sucesso')
                req.session.save(()=>{
                    return res.redirect('back')
            })
            return
            
    } catch (error) {
        console.log(error)
        return res.render('404')
        
    }

    
    }

    async login(req,res){
      
    }
}

   

module.exports = new User()